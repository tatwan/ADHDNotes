/**
 * Theme Bridge CSS
 *
 * This stylesheet bridges the gap between Typora-style themes (like mine.css)
 * and react-markdown's output structure. It maps Typora classes to standard
 * markdown HTML elements.
 * 
 * Key mappings:
 * - Typora uses .md-fences for code blocks
 * - React-Markdown uses pre > code
 * - We add .md-fences class to code blocks via component customization
 */

/* Ensure code blocks inherit .md-fences styling from themes */
.markdown-preview pre {
  margin-bottom: 15px;
  margin-top: 15px;
  padding-top: 8px;
  padding-bottom: 6px;
}

/* Code blocks should use .md-fences styles from themes */
.markdown-preview pre > code {
  display: block;
  overflow-x: auto;
  line-height: 1.45;
}

/* When no theme is selected, provide sensible defaults for code blocks */
.markdown-preview pre > code:not(.md-fences) {
  background-color: var(--color-mist-white);
  border: 1px solid var(--color-cool-grey-2);
  border-radius: 3px;
  padding: 8px 12px;
  font-size: 0.9em;
  font-family: ui-monospace, SFMono-Regular, 'SF Mono', Menlo, Consolas, 'Liberation Mono', monospace;
}

/* Inline code should NOT inherit code block styles */
.markdown-preview :not(pre) > code {
  display: inline !important;
  padding: 0.2em 0.4em !important;
  font-size: 85%;
  /* Let themes style inline code via the 'code' selector */
}

/* Override any block-specific styles that might leak to inline code */
.markdown-preview p code,
.markdown-preview li code,
.markdown-preview h1 code,
.markdown-preview h2 code,
.markdown-preview h3 code,
.markdown-preview h4 code,
.markdown-preview h5 code,
.markdown-preview h6 code,
.markdown-preview td code,
.markdown-preview th code,
.markdown-preview blockquote code {
  display: inline !important;
  margin: 0 !important;
}

/* Support for highlight syntax (==text==) */
.markdown-preview mark {
  background-color: var(--mark-bg, var(--color-pastel-peach));
  color: var(--mark-text, var(--color-slate-ink));
  border-radius: 2px;
  padding: 2px 4px;
  margin: 0 1px;
}

/* Task list styling to match Typora */
.markdown-preview .task-list-item {
  list-style-type: none;
  position: relative;
}

.markdown-preview .task-list-item > input[type="checkbox"] {
  margin-right: 0.5em;
}

/* Ensure tables render properly */
.markdown-preview table {
  border-collapse: collapse;
  width: 100%;
  margin-bottom: 16px;
}

.markdown-preview table th,
.markdown-preview table td {
  border: 1px solid var(--color-cool-grey-2);
  padding: 6px 13px;
}

.markdown-preview table tr:nth-child(2n) {
  background-color: var(--color-mist-white);
}

/* Fix for blockquote headers when React-Markdown wraps them in <p> tags */
/* React-Markdown may wrap headers in paragraphs, so remove paragraph padding */
.markdown-preview blockquote > p:first-child:has(> h1:only-child),
.markdown-preview blockquote > p:first-child:has(> h2:only-child),
.markdown-preview blockquote > p:first-child:has(> h3:only-child),
.markdown-preview blockquote > p:first-child:has(> h4:only-child),
.markdown-preview blockquote > p:first-child:has(> h5:only-child),
.markdown-preview blockquote > p:first-child:has(> h6:only-child) {
  margin: 0 !important;
  padding: 0 !important;
}

